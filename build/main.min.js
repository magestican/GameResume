/*! BryanArbeloResume 2014-11-28 */
function Player(config){this.w=config.w,this.l=config.l,this.x=0,this.y=0,this.zoomW=this.w,this.zoomL=this.l,this.sourceX=0,this.sourceY=0,this.posX=TwoD.screen.width/2-this.w/2,this.posY=TwoD.screen.height/2-this.l/2,this.velocityX=0,this.velocityY=0,this.velocityMax=config.velocityMax,this.velocityMin=config.velocityMin,this.velocityUnit=config.velocityUnit,this.image=new Image,this.image.src=config.sprite}function getRandomColor(){for(var letters=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],color="#",i=0;6>i;i++)color+=letters[Math.round(15*Math.random())];return color}function getViewport(){var e=window,a="inner";return"innerWidth"in window||(a="client",e=document.documentElement||document.body),{width:e[a+"Width"],height:e[a+"Height"]}}function getMousePos(canvas,evt){var rect=canvas.getBoundingClientRect();return{x:evt.clientX-rect.left,y:evt.clientY-rect.top}}function Vector(x,y){this.x=x||0,this.y=y||0}function Tile(left,top,id,type,sprite){this.sprite=sprite,this.left=left,this.top=top,this.w=sprite.tileW,this.l=sprite.tileL,this.id=id,this.type=type,this.sourceX=0,this.sourceY=0}!function(){var App=window.App=angular.module("bryan_resume_game",["Controllers","Directives","Factories","Filters","Services"]);App.config(["$routeProvider",function(){}])}(),angular.module("Controllers",[]),angular.module("Directives",[]),angular.module("Factories",[]),angular.module("Filters",[]),angular.module("Services",[]),function(){angular.module("Services").service("AssetsSvc",["$rootScope","$q","Particle","GameSvc",function(){var AssetHelper;return new(AssetHelper=function(){function AssetHelper(){this.cursor=this.loadResource("img/radix_phantasma_normal_select.png")}var url;return url="https://localhost/",AssetHelper.prototype.loadResource=function(resourceName){var image;return image=new Image,image.src=url+resourceName,image.onError=function(){return console.log("Error loading this image")},image},AssetHelper}())}])}.call(this);var Camera=function(player,zoom){this.zoom=zoom,this.x=player.x,this.y=player.y,this.boundsX=Game.width/16/this.zoom,this.boundsY=Game.height/14/this.zoom};Camera.prototype.update=function(player){this.x=player.x,this.y=player.y},Debug=function(){this.updateStats=new Stats("update",100),this.renderStats=new Stats("render",100),this.gameTickbox=new GameTickbox,this.objCount=new ObjCount,this.worldInfo=new WorldInfo,this.camInfo=new CamInfo},Debug.prototype={initialize:function(viewport){viewport.appendChild(this.updateStats.domElement),viewport.appendChild(this.renderStats.domElement),viewport.appendChild(this.gameTickbox.domElement),viewport.appendChild(this.objCount.domElement),viewport.appendChild(this.worldInfo.domElement),viewport.appendChild(this.camInfo.domElement),this.renderStats.position(this.updateStats.domElement.offsetHeight,0),this.gameTickbox.position(0,this.updateStats.domElement.offsetWidth),this.objCount.position(this.gameTickbox.domElement.offsetHeight,this.updateStats.domElement.offsetWidth),this.worldInfo.position(42,this.updateStats.domElement.offsetWidth),this.camInfo.position(64,this.updateStats.domElement.offsetWidth)},update:function(){this.updateStats.update()},draw:function(){this.renderStats.update(),this.gameTickbox.update(),this.objCount.update(),this.worldInfo.update(),this.camInfo.update()}};var Stats=function(name,delay){var id=name,updateDelay=delay,startTime=Date.now(),prevTime=startTime,ms=0,msMin=1/0,msMax=0,fps=0,fpsMin=1/0,fpsMax=0,frames=0,mode=0,container=document.createElement("div");container.id="debug-stats",container.className="debug "+id,container.addEventListener("mousedown",function(event){event.preventDefault(),setMode(++mode%2),msMin=1/0,msMax=0,fpsMin=1/0,fpsMax=0},!1),container.style.cssText="width:120px;opacity:0.9;cursor:pointer;z-index:10000;position:absolute;";var fpsDiv=document.createElement("div");fpsDiv.id="fps",fpsDiv.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",container.appendChild(fpsDiv);var fpsText=document.createElement("div");fpsText.id="fpsText",fpsText.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",fpsText.innerHTML="FPS",fpsDiv.appendChild(fpsText);var fpsGraph=document.createElement("div");for(fpsGraph.id="fpsGraph",fpsGraph.style.cssText="position:relative;width:112px;height:30px;background-color:#0ff",fpsDiv.appendChild(fpsGraph);fpsGraph.children.length<112;){var bar=document.createElement("span");bar.style.cssText="width:1px;height:30px;float:left;background-color:#113",fpsGraph.appendChild(bar)}var msDiv=document.createElement("div");msDiv.id="ms",msDiv.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",container.appendChild(msDiv);var msText=document.createElement("div");msText.id="msText",msText.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",msText.innerHTML="MS",msDiv.appendChild(msText);var msGraph=document.createElement("div");for(msGraph.id="msGraph",msGraph.style.cssText="position:relative;width:112px;height:30px;background-color:#0f0",msDiv.appendChild(msGraph);msGraph.children.length<112;){var bar=document.createElement("span");bar.style.cssText="width:1px;height:30px;float:left;background-color:#131",msGraph.appendChild(bar)}var setMode=function(value){switch(mode=value){case 0:fpsDiv.style.display="block",msDiv.style.display="none";break;case 1:fpsDiv.style.display="none",msDiv.style.display="block"}},updateGraph=function(dom,value){var child=dom.appendChild(dom.firstChild);child.style.height=value+"px"};return{domElement:container,setMode:setMode,position:function(x,y){container.style.top=x+"px",container.style.left=y+"px"},begin:function(){startTime=Date.now()},end:function(){var time=Date.now();return frames++,time>prevTime+updateDelay&&(ms=time-startTime,msMin=Math.min(msMin,ms),msMax=Math.max(msMax,ms),msText.textContent=id+" ("+msMin+"-"+msMax+") "+ms+" MS",updateGraph(msGraph,Math.min(30,30-ms/200*30)),fps=Math.round(1e3*frames/(time-prevTime)),fpsMin=Math.min(fpsMin,fps),fpsMax=Math.max(fpsMax,fps),fpsText.textContent=id+" ("+fpsMin+"-"+fpsMax+") "+fps+" FPS",updateGraph(fpsGraph,Math.min(30,30-fps/100*30)),prevTime=time,frames=0),time},update:function(){startTime=this.end()}}},GameTickbox=function(){var container=document.createElement("div");return container.id="debug-gameTickbox",container.style.cssText="width:120px;height:20px;opacity:0.9;cursor:pointer;z-index:10000;position:absolute;color:#FFFFFF;text-shadow:1px 1px #000000",{domElement:container,position:function(x,y){container.style.top=x+"px",container.style.left=y+"px"},update:function(){container.innerHTML="T: "+Math.round(Game.tick)}}},ObjCount=function(){var container=document.createElement("div");return container.id="debug-objCount",container.style.cssText="width:100px;height:20px;opacity:0.9;cursor:pointer;z-index:10000;position:absolute;color:#FFFFFF;text-shadow:1px 1px #000000",{domElement:container,position:function(x,y){container.style.top=x+"px",container.style.left=y+"px"},update:function(){container.innerHTML="O: ["+World.tiles.length+"] E: ["+(World.entities.length+1)+"]"}}},WorldInfo=function(){var container=document.createElement("div");return container.id="debug-worldInfo",container.style.cssText="width:150px;height:40px;opacity:0.9;cursor:pointer;z-index:10000;position:absolute;color:#FFFFFF;text-shadow:1px 1px #000000",{domElement:container,position:function(x,y){container.style.top=x+"px",container.style.left=y+"px"},update:function(){container.innerHTML="TileX: "+(Game.screen.world.camera.x/128>>0)}}},CamInfo=function(){var container=document.createElement("div");return container.id="debug-camInfo",container.style.cssText="width:150px;height:40px;opacity:0.9;cursor:pointer;z-index:10000;position:absolute;color:#FFFFFF;text-shadow:1px 1px #000000",{domElement:container,position:function(x,y){container.style.top=x+"px",container.style.left=y+"px"},update:function(){container.innerHTML="cam_X: "+Game.screen.world.camera.x+"<br/>cam_Y: "+Game.screen.world.camera.y}}};(function(){angular.module("Services").service("GameSvc",["$rootScope","$q","Particle",function(){var Game;return new(Game=function(){function Game(){}return Game.debug=!0,Game}())}])}).call(this),Player.prototype.initialize=function(context){this.context=context},Player.prototype.update=function(){TwoD.input.isKeyDown(Keys.A)?(this.velocityX-=this.velocityX>this.velocityMin?this.velocityUnit:0,this.x+=this.velocityX):TwoD.input.isKeyDown(Keys.D)?(this.velocityX+=this.velocityX<this.velocityMax?this.velocityUnit:0,this.x+=this.velocityX):this.velocityX=0,TwoD.input.isKeyDown(Keys.W)?(this.velocityY-=this.velocityY>this.velocityMin?this.velocityUnit:0,this.y+=this.velocityY):TwoD.input.isKeyDown(Keys.S)?(this.velocityY+=this.velocityY<this.velocityMax?this.velocityUnit:0,this.y+=this.velocityY):this.velocityY=0,this.zoomW=this.w/TwoD.screen.world.camera.zoom,this.zoomL=this.l/TwoD.screen.world.camera.zoom,this.posX+=this.velocityX/TwoD.screen.world.camera.zoom,this.posY+=this.velocityY/TwoD.screen.world.camera.zoom,this.posX<0+TwoD.screen.world.camera.boundsX&&(this.posX-=this.velocityX/TwoD.screen.world.camera.zoom),this.posX>TwoD.screen.width-this.zoomW-TwoD.screen.world.camera.boundsX&&(this.posX-=this.velocityX/TwoD.screen.world.camera.zoom),this.posY<0+TwoD.screen.world.camera.boundsY&&(this.posY-=this.velocityY/TwoD.screen.world.camera.zoom),this.posY>TwoD.screen.height-this.zoomL-TwoD.screen.world.camera.boundsY&&(this.posY-=this.velocityY/TwoD.screen.world.camera.zoom)},Player.prototype.draw=function(context){context.drawImage(this.image,this.sourceX,this.sourceY,this.w,this.l,this.posX,this.posY,this.zoomW,this.zoomL)};var Screen=function(){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.viewport=getViewport(),this.cursor=new Cursor,this.width=this.viewport.width%2===0?this.viewport.width:this.viewport.width+1,this.height=this.viewport.height%2===0?this.viewport.height:this.viewport.height+1,this.resizing=!1};Screen.prototype={initialize:function(viewport){this.canvas.width=Game.screen.width,this.canvas.height=Game.screen.height,this.canvas.style.position="absolute",this.canvas.style.zIndex="1000",this.canvas.style.top=0,this.canvas.style.left=0,viewport.appendChild(this.canvas),window.onresize=function(){Game.screen.resize()},window.onmousemove=function(e){Game.screen.cursor.update(Game.screen.canvas.getBoundingClientRect(),e)}},setWorld:function(world){this.world=world,this.world.initialize(this.context)},update:function(){this.world.update()},clear:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},draw:function(){this.world.draw(this.context),this.cursor.draw(this.context)},resize:function(){TwoD.screen.resizing||(TwoD.pause(),TwoD.screen.resizing=!0,setTimeout(function(){TwoD.screen.resizing=!1,TwoD.screen.viewport=getViewport(),TwoD.screen.width=TwoD.screen.viewport.width%2===0?TwoD.screen.viewport.width:TwoD.screen.viewport.width+1,TwoD.screen.height=TwoD.screen.viewport.height%2===0?TwoD.screen.viewport.height:TwoD.screen.viewport.height+1,TwoD.screen.canvas.width=TwoD.screen.width,TwoD.screen.canvas.height=TwoD.screen.height,TwoD.pause()},TwoD.skipTicks))}},Vector.prototype.add=function(vector){this.x+=vector.x,this.y+=vector.y},Vector.prototype.getMagnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},Vector.prototype.getAngle=function(){return Math.atan2(this.y,this.x)},Vector.fromAngle=function(angle,magnitude){return new Vector(magnitude*Math.cos(angle),magnitude*Math.sin(angle))},function(){angular.module("Services").service("DeviceSvc",["$rootScope","$q","Particle",function(){return this.canvas=document.getElementById("myCanvas"),void(this.ctx=this.canvas.getContext("2d"))}])}.call(this),function(){angular.module("Services").service("CursorSvc",["$rootScope","$q","Particle","AssetsSvc","DeviceSvc",function($rootScope,$q,Particle,AssetsSvc,DeviceSvc){var Cursor;return new(Cursor=function(){function Cursor(){}var x,y;return x=0,y=0,Cursor.colorR=255,Cursor.colorG=255,Cursor.colorB=0,Cursor.event={},window.onmousemove=function(event){return Cursor.event=event},Cursor.prototype.update=function(){var rect;if(Cursor.event.clientX)return rect=DeviceSvc.canvas.getBoundingClientRect(),x=Math.round(Cursor.event.clientX-rect.left/(rect.right-rect.left)*DeviceSvc.canvas.width)-5,y=Math.round(Cursor.event.clientY-rect.top/(rect.bottom-rect.top)*DeviceSvc.canvas.width)-5},Cursor.prototype.draw=function(){return DeviceSvc.ctx.drawImage(AssetsSvc.cursor,x,y)},Cursor}())}])}.call(this),function(){angular.module("Services").service("InputSvc",["$rootScope","$q","Particle",function(){var Input;return new(Input=function(){function Input(){var self;this.keyState=[],this.keyCurrent=[],this.keyLast=[],this.Keys={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38,W:87,S:83,A:65,D:68},self=this,window.addEventListener("keydown",function(ev){return self.keyCurrent[ev.which]=!0,self.keyState[ev.which]=!0}),window.addEventListener("keyup",function(ev){return self.keyState[ev.which]=!1})}return Input.prototype.update=function(){return this.keyLast=this.keyCurrent,void(this.keyCurrent=this.keyState)},Input.prototype.isKeyDown=function(key){return!!this.keyCurrent[key]},Input.prototype.isKeyTriggered=function(key){return!!this.keyCurrent[key]&&!this.keyLast[key]},Input.prototype.isKeyReleased=function(key){return!this.keyCurrent[key]&&!!this.keyLast[key]},Input}())}])}.call(this);var World=function(){this.player=new Player(_PlayerConfig),this.camera=new Camera(this.player,1)};World.entities=[],World.tiles=[],World.prototype={initialize:function(){var _map={sprite:{src:"images/tiles/G000M800.BMP",tileW:128,tileL:128},tiles:[]};Game.server.loadWorld(0,0,function(){4==xmlhttp.readyState&&200==xmlhttp.status&&(_map.tiles=eval(xmlhttp.responseText),World.loadMap(_map))})},update:function(){this.player.update(),this.camera.update(this.player);for(var i=0;i<World.tiles.length;i++)World.tiles[i].update();for(var i=0;i<World.entities.length;i++)World.entities[i].update()},draw:function(context){for(var i=0;i<World.tiles.length;i++)World.tiles[i].draw(context);for(var i=0;i<World.entities.length;i++)World.entities[i].draw(context);this.player.draw(context)}},World.loadMap=function(map){this.map=map,this.map.sprite.image=new Image,this.map.sprite.image.src=this.map.sprite.src;for(var tile in this.map.tiles)World.tiles.push(new Tile(this.map.tiles[tile].x,this.map.tiles[tile].y,this.map.tiles[tile].id,this.map.tiles[tile].type,this.map.sprite))},World.getRegion=function(){},Tile.prototype.update=function(){this.posX=this.left*this.w+-2*TwoD.screen.world.camera.x+TwoD.screen.width/2-this.w/2,this.posY=this.top*this.l+-2*TwoD.screen.world.camera.y+TwoD.screen.height/2-this.l/2,this.zoomW=this.w/TwoD.screen.world.camera.zoom,this.zoomL=this.l/TwoD.screen.world.camera.zoom},Tile.prototype.draw=function(ctx){ctx.drawImage(this.sprite.image,this.sourceX,this.sourceY,this.w,this.l,this.posX,this.posY,this.zoomW,this.zoomL)},function(){angular.module("Factories").factory("Emitter",["$rootScope","$q","Particle",function($rootScope,$q,Particle){var Emitter;return Emitter=function(){function Emitter(position,velocity,spread){this.position=position,this.velocity=velocity,this.spread=null!=spread?spread:Math.PI/32,this.drawColor="#999"}return Emitter.prototype.emitParticle=function(){var angle,magnitude,p,position,velocity;return angle=this.velocity.getAngle()+this.spread-Math.random()*this.spread*2,magnitude=this.velocity.getMagnitude(),position=new Vector(this.position.x,this.position.y),velocity=Vector.fromAngle(angle,magnitude),p=new Particle(position,velocity)},Emitter}()}]),angular.module("Services").service("EmitterSvc",["$rootScope","$q","Particle",function(){var emitters;return emitters=this.emitters=[]}])}.call(this),function(){angular.module("Factories").factory("Field",["$rootScope","$q","Particle",function(){var Field;return Field=function(){function Field(point,mass){this.position=point,this.setMass(mass)}return Field.prototype.setMass=function(mass){return this.mass=null!=mass?mass:100,this.drawColor=this.mass<0?"#f00":"#0f0",Field},Field}()}])}.call(this),function(){angular.module("Factories").factory("Particle",["$rootScope","$q",function(){var Particle;return Particle=function(point,velocity,acceleration){return this.position=point||new Vector(0,0),this.velocity=velocity||new Vector(0,0),void(this.acceleration=acceleration||new Vector(0,0))},Particle.prototype.move=function(){return this.velocity.add(this.acceleration),this.position.add(this.velocity)},Particle.prototype.submitToFields=function(fields){var field,force,totalAccelerationX,totalAccelerationY,vectorX,vectorY,_i,_len,_results;for(totalAccelerationX=0,totalAccelerationY=0,_results=[],_i=0,_len=fields.length;_len>_i;_i++)field=fields[_i],vectorX=field.position.x-this.position.x,vectorY=field.position.y-this.position.y,force=field.mass/Math.pow(vectorX*vectorX+vectorY*vectorY,1.5),totalAccelerationX+=vectorX*force,totalAccelerationY+=vectorY*force,_results.push(this.acceleration=new Vector(totalAccelerationX,totalAccelerationY));return _results},Particle}]),angular.module("Services").service("ParticleSvc",["$q","$rootScope","$location","EmitterSvc","DeviceSvc",function($q,$rootScope,$location,EmitterSvc,DeviceSvc){var emissionRate,fields,maxParticles,particleSize,particles;return particles=this.particles=[],fields=this.fields=[],particleSize=this.particleSize=1,maxParticles=this.maxParticles=4e3,emissionRate=this.emissionRate=4,this.DrawParticles=function(){var col1,col2,col3,particle,position,_i,_len,_results;for(col1=Math.floor(255*Math.random())+0,col2=Math.floor(255*Math.random())+0,col3=Math.floor(255*Math.random())+0,DeviceSvc.ctx.fillStyle="rgb("+col1.toString()+","+col2.toString()+","+col3.toString()+")",_results=[],_i=0,_len=particles.length;_len>_i;_i++)particle=particles[_i],position=particle.position,_results.push(DeviceSvc.ctx.fillRect(position.x,position.y,this.particleSize,this.particleSize));return _results},this.PlotParticles=function(boundsX,boundsY){var currentParticles,particle,pos,_i,_len;for(currentParticles=[],_i=0,_len=particles.length;_len>_i;_i++)particle=particles[_i],pos=particle.position,pos.x<0||pos.x>boundsX||pos.y<0||pos.y>boundsY||(particle.submitToFields(fields),particle.move(),currentParticles.push(particle));return particles=currentParticles},void(this.AddNewParticles=function(){var emitter,error,j,_i,_len,_ref,_results;if(!(particles.length>maxParticles)){for(_ref=EmitterSvc.emitters,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)emitter=_ref[_i],_results.push(function(){var _j,_results1;for(_results1=[],j=_j=0;emissionRate>=0?emissionRate>=_j:_j>=emissionRate;j=emissionRate>=0?++_j:--_j)try{_results1.push(particles.push(emitter.emitParticle()))}catch(_error){error=_error,_results1.push(void 0)}return _results1}());return _results}})}])}.call(this),function(){}.call(this),angular.module("Controllers").controller("MainController",["$scope","$filter","Particle","ParticleSvc","Emitter","Field","EmitterSvc","DeviceSvc","CursorSvc",function($scope,$filter,Particle,ParticleSvc,Emitter,Field,EmitterSvc,DeviceSvc,CursorSvc){function drawCircle(object){ctx.fillStyle=object.drawColor,ctx.beginPath(),ctx.arc(object.position.x,object.position.y,objectSize,0,2*Math.PI),ctx.closePath(),ctx.fill()}function drawMyName(){DeviceSvc.ctx.fillStyle="rgb(0,0,0)",ctx.font="30pt serif",ctx.fillText("Bryan Arbelo",midX+150,midY),ctx.font="10pt serif",ctx.fillText("Hope you like my angular.js + game engine on coffee script",midX+150,midY+100),ctx.fillText("and the use of google's free hosting and dropbox's storage :)",midX+150,midY+114)}function clear(){ctx.clearRect(0,0,c.width,c.height)}function loop(){clear(),update(),draw(),queue()}function clear(){ctx.clearRect(0,0,c.width,c.height)}function update(){ParticleSvc.AddNewParticles(),ParticleSvc.PlotParticles(c.width,c.height)}function draw(){clear(),ParticleSvc.DrawParticles(),ParticleSvc.fields.forEach(drawCircle),EmitterSvc.emitters.forEach(drawCircle),drawMyName(),CursorSvc.draw()}function queue(){CursorSvc.update(),window.requestAnimationFrame(loop)}var Game=window.Game={},ctx=DeviceSvc.ctx,c=DeviceSvc.canvas;Game.fps=60,Game.maxFrameSkip=10,Game.skipTicks=1e3/Game.fps,Game.width=c.width,Game.height=c.height;var objectSize=3,midX=c.width/2,midY=c.height/2;EmitterSvc.emitters=[new Emitter(new Vector(midX-150,midY),Vector.fromAngle(6,2))],ParticleSvc.fields.push(new Field(new Vector(midX-100,midY+20),150)),ParticleSvc.fields.push(new Field(new Vector(midX-300,midY+20),100)),ParticleSvc.fields.push(new Field(new Vector(midX-200,midY-40),-20)),ParticleSvc.fields.push(new Field(new Vector(midX,midY+20),-20)),Game.pause=function(){this.paused=this.paused?!1:!0},Game.clear=function(){ctx.clearRect(0,0,c.width,c.height)},loop()}]),angular.module("Directives").directive("btn",["$timeout",function($timeout){return{restrict:"C",link:function(scope,element){var tooltipTimer;element.on("mouseenter",function(){tooltipTimer=$timeout(function(){element.addClass("tooltip-show"),$timeout(function(){element.addClass("tooltip-animate")},50)},200)}),element.on("mouseleave",function(){$timeout.cancel(tooltipTimer),element.removeClass("tooltip-show tooltip-animate")})}}}]).directive("tooltip",function(){return{restrict:"A",replace:!0,transclude:!0,templateUrl:"tooltip.html",link:function(){}}}),angular.module("Factories").factory("Manager",["$rootScope","$q","FileType",function(){return{addFile:{},addProject:{},applicationScope:void 0,currentPage:"default",currentTeam:void 0,currentUser:void 0,currentViewMode:void 0,editFile:void 0,editProject:void 0,editUser:void 0,headerContextual:{display:{current:void 0,items:[]},displayCache:{},endDatePicker:void 0,filter:!1,filterFunction:window.Slic.K,projects:[],projectsShow:!1,projectStatuses:{items:[]},title:void 0,titleLink:"#",titleType:void 0,tags:[],tagCategories:[],tagsMerged:[],tagsInput:void 0,tagCategoriesShow:!1,tagsCache:{},sort:{current:void 0,items:[]},sortCache:{},users:[],usersShow:!1},project:void 0,message:{show:!1,type:"simple",text:void 0,display:{},showMessage:function(msg){this.show=!0,this.text=msg}},salesforce:void 0!==window.Slic?window.Slic.Salesforce:{},sidebar:{drawer:!1,drawerItems:[],items:[],navItems:{},scrollable:void 0,show:!1},settings:{sidebar:{pinned:!1},viewModes:{assets:"expanded",projects:"expanded",people:"expanded",personas:"expanded"}},teams:[],teamsLoaded:jQuery.Deferred(),$html:$("html,body"),$pageWrapper:$("#page-wrapper")}}]).factory("DataTemplates",function(){return{fileUpload:{baseUrl:void 0!==window.Slic?window.Slic.Salesforce.baseUrl:"/",focus:!1,id:void 0,imageOnly:!1,name:void 0,onBlur:function(){},onUploadChange:function(){},required:!1,server:!1,sizeLimitTip:!0,sizeLimitMessage:!1,sizeLimitError:!1,sizeLimitSolution:!0,status:void 0,title:void 0,type:void 0,uploadEntity:"File",uploadOnly:!1,url:void 0,update:!1,reset:function(){angular.forEach(["id","name","status","title","type","url"],function(key){this[key]=void 0},this),angular.forEach(["server","sizeLimitMessage","update"],function(key){this[key]=!1},this)}},headerContextualTab:{filter:!0,sort:!0,viewModes:!0,active:!1},sidebarNavItem:{active:!1,action:function(){},actionSecondary:function(){},actionSecondaryIcon:"icon-breadcrumb",count:void 0,drawerItems:void 0,icon:void 0,label:void 0,link:void 0},sidebarDrawerItem:{id:void 0,label:void 0,link:void 0,hasItems:!1,items:void 0,showItems:!1}}}).factory("Utilities",["$filter","$route","$location","Manager",function($filter,$route,$location,Manager){function PromiseQueue(scope,queue){this.scope=scope,angular.forEach(queue,function(promise){promise.resolve(this.scope)},this),queue=[]}return PromiseQueue.prototype.push=function(promise){promise.resolve(this.scope)},{applyRouteToTabs:function(params){var defaults={history:!0};params=angular.extend(defaults,params);var path=$location.path().replace(/^\//,"");path=""===path?null:path;var currentTab=$filter("getById")(params.tabs,path);if(!currentTab&&(currentTab=$filter("getById")(params.tabs,params.defaultTab),!currentTab))throw new Error("Tab not found and no default was specified");if(params.scope.currentTab!==currentTab){Manager.headerContextual.currentTab&&(Manager.headerContextual.sortCache[Manager.headerContextual.currentTab.id]=angular.copy(Manager.headerContextual.sort),Manager.headerContextual.tagsCache[Manager.headerContextual.currentTab.id]=angular.copy(Manager.headerContextual.tags)),Manager.headerContextual.sort=angular.copy(Manager.headerContextual.sortCache[currentTab.id])||Manager.headerContextual.sort,Manager.headerContextual.tags=angular.copy(Manager.headerContextual.tagsCache[currentTab.id])||[],angular.forEach(params.tabs,function(tab){tab.active=!1}),currentTab.active=!0,this.setCurrentViewMode(currentTab);try{currentTab.action.call()}catch(e){}return Manager.currentPage=currentTab.id,params.scope.currentTab=Manager.headerContextual.currentTab=currentTab,currentTab}},setCurrentViewMode:function(tab){Manager.settings.viewModes[tab.id]&&(Manager.currentViewMode=Manager.settings.viewModes[tab.id])},getValueFromKeys:function(obj,keys){for(keys=keys.split(".");keys.length>1;)obj=obj[keys.shift()];return obj[keys.shift()]},loadScript:function(src){var deferred=jQuery.Deferred(),body=document.getElementsByTagName("body")[0],script=document.createElement("script");return script.type="text/javascript",script.src=src,script.async=!0,script.onload=function(){deferred.resolve()},body.appendChild(script),deferred},PromiseQueue:PromiseQueue,safeApply:function($scope,fn){var phase=$scope.$root.$$phase;"$apply"==phase||"$digest"==phase?fn&&$scope.$eval(fn):fn?$scope.$apply(fn):$scope.$apply()},scrollTop:function(duration){duration=void 0===duration?400:duration,Manager.$html.animate({scrollTop:0},{duration:duration})},setValueFromKeys:function(obj,keys,value){for(keys=keys.split(".");keys.length>1;)obj=obj[keys.shift()];obj[keys.shift()]=value},styleString:function(styles){var style,styleString="";for(style in styles)styleString+=style+":"+styles[style]+";";return styleString},unescape:function(string){return""!=string&&null!=string&&(string=string.replace(/&#39;/g,"'"),string=string.replace(/&amp;#39;/g,"'"),string=string.replace(/&quot;/g,'"'),string=string.replace(/&amp;/g,"&"),string=string.replace(/&gt;/g,">"),string=string.replace(/&lt;/g,"<")),string}}}]).factory("FileType",["$filter",function(){var types=[{label:"Vector",extensions:["ai","eps","ait","svg","svgs"],styles:{"background-color":"#FFBE55"}},{label:"Adobe Photoshop",extensions:["psd","pdb"],styles:{"background-color":"#7ED0FC"}},{label:"Adobe PDF",extensions:["pdf"],styles:{"background-color":"#D82610"}},{label:"Adobe Flash",extensions:["fla","flv","swf","xfl","as","jsfl","asc","f4v"],styles:{"background-color":"#FA3725"}},{label:"Adobe Premiere",extensions:["prproj"],styles:{"background-color":"#E58AF9"}},{label:"Adobe Indesign",extensions:["indd","indl","indt","indp","inx","idml","xqx"],styles:{"background-color":"#F66FB8"}},{label:"Adobe After Effects",extensions:"aep",styles:{"background-color":"#E58AF9"}},{label:"Sketch",extensions:"sketch",styles:{"background-color":"#BF8FF9"}},{label:"Microsoft Word",extensions:["doc","docx","dot","dotx"],styles:{"background-color":"#14A9DA"}},{label:"Microsoft Excel",extensions:["xls","xlsx","csv","xlt","xltx","xml"],styles:{"background-color":"#45B058"}},{label:"Microsoft PowerPoint",extensions:["pptx","ppt","potx","pot"],styles:{"background-color":"#E34221"}},{label:"Visio",extensions:["vsd","vss","vst","vsw","vsdx","vssx","vstx"],styles:{"background-color":"#496AB3"}},{label:"Axure",extensions:["rp"],styles:{"background-color":"#1AB6D9"}},{label:"OmniGraffle",extensions:["graffle"],styles:{"background-color":"#26C587"}},{label:"Keynote",extensions:["key"],styles:{"background-color":"#F2B854"}},{label:"Pages",extensions:["pages"],styles:{"background-color":"#2C2181"}},{label:"Numbers",extensions:["numbers"],styles:{"background-color":"#19A13B"}},{label:"Final Cut Pro",extensions:["fcp"],styles:{"background-color":"#5096D6"}},{label:"Motion",extensions:["motn"],styles:{"background-color":"#45BFBF"}},{label:"Garage Band",extensions:["band"],styles:{"background-color":"#F9CB4B"}},{label:"Balsamiq",extensions:["bmml"],styles:{"background-color":"#760209"}},{label:"Audio",extensions:["wav","mp3","wma","m4a","m4p","aac","alac"],styles:{"background-color":"#379FD3"}},{label:"Video",extensions:["mpg","mpeg","mov","qt","avi","dv","dvi","flv","mp4","m2v","m4v","wmv"],styles:{"background-color":"#8E4C9E"}},{label:"Image",extensions:["jpg","jpeg","jfif","png","tiff","tif","gif","bmp","pict","raw","ico"],styles:{"background-color":"#49C9A7"}},{label:"Code",extensions:["html","htm","css","sass","scss","less","js","coffee","php","hbs"],styles:{"background-color":"#505050"}},{label:"Text",extensions:["txt","rtf"],styles:{"background-color":"#B58D61"}},{label:"Program",extensions:["dmg","exe"],styles:{"background-color":"#C7C9CA"}},{label:"Font",extensions:["ttf","otf"],styles:{"background-color":"#AEB0B3"}},{label:"Zip",extensions:["zip","zipx"],styles:{"background-color":"#97999C"}}],sites=[{labe:"General URL",type:"url",styles:{background:"url(../../img/icon-url.png) center no-repeat","background-color":"#3ABAE9","text-indent":"-1000px"}},{label:"Google Document",pattern:/docs\.google\.com.*document/,type:"google-doc",group:"google-drive",styles:{background:"url(../../img/icon-google-doc.png) center no-repeat","background-color":"#3C8CEA","text-indent":"-1000px"}},{label:"Google Spreadsheet",pattern:/docs\.google\.com.*spreadsheet/,type:"google-spreadsheet",group:"google-drive",styles:{background:"url(../../img/icon-google-spreadsheet.png) center no-repeat","background-color":"#20A971","text-indent":"-1000px"}},{label:"Google Presentation",pattern:/docs\.google\.com.*presentation/,type:"google-presentation",group:"google-drive",styles:{background:"url(../../img/icon-google-presentation.png) center no-repeat","background-color":"#F8BE46","text-indent":"-1000px"}},{label:"Solidify",pattern:/solidifyapp\.com/,type:"slfy",group:"zurb",styles:{background:"url(../../img/icon-solidify.png) center no-repeat","background-color":"#CD135C","text-indent":"-1000px"}},{label:"Influence",pattern:/influenceapp\.com/,type:"infl",group:"zurb",styles:{background:"url(../../img/icon-influence.png) center no-repeat","background-color":"#16AEBE","text-indent":"-1000px"}},{label:"Verify",pattern:/verifyapp\.com/,type:"vrfy",group:"zurb",styles:{background:"url(../../img/icon-verify.png) center no-repeat","background-color":"#B2D448","text-indent":"-1000px"}},{label:"Notable",pattern:/notableapp\.com/,type:"ntbl",group:"zurb",styles:{background:"url(../../img/icon-notable.png) center no-repeat","background-color":"#FEB043","text-indent":"-1000px"}},{label:"Dropbox",pattern:/dropbox\.com/,type:"drbx",styles:{background:"url(../../img/icon-dropbox.png) center no-repeat","background-color":"#3ABAE9","text-indent":"-1000px"}},{label:"Youtube",pattern:/youtube\.com/,type:"tube",styles:{background:"url(../../img/icon-youtube.png) center no-repeat","background-color":"#D6423C","text-indent":"-1000px"}},{label:"Vimeo",pattern:/vimeo\.com/,type:"vmeo",styles:{background:"url(../../img/icon-vimeo.png) center no-repeat","background-color":"#4AC7FD","text-indent":"-1000px"}},{label:"Flickr",pattern:/flickr\.com/,type:"flkr",styles:{background:"url(../../img/icon-flickr.png) center no-repeat","background-color":"#f1f1f1","text-indent":"-1000px"}},{label:"Dribbble",pattern:/dribbble\.com/,type:"drbl",styles:{background:"url(../../img/icon-dribbble.png) center no-repeat","background-color":"#F56398","text-indent":"-1000px"}},{label:"Twitter",pattern:/twitter\.com/,type:"twtr",styles:{background:"url(../../img/icon-twitter.png) center no-repeat","background-color":"#00D4FA","text-indent":"-1000px"}},{label:"Instagram",pattern:/instagram\.com/,type:"inst",styles:{background:"url(../../img/icon-instagram.png) center no-repeat","background-color":"#5589AA","text-indent":"-1000px"}},{label:"Github",pattern:/git/,type:"gh",styles:{background:"url(../../img/icon-github.png) center no-repeat","background-color":"#555555","text-indent":"-1000px"}},{label:"Proto",pattern:/proto/,type:"prto",styles:{background:"url(../../img/icon-salesforce.png) center no-repeat","background-color":"#027BD2","text-indent":"-1000px"}},{label:"Asana",pattern:/asana\.com/,type:"asna",styles:{background:"url(../../img/icon-asana.png) center no-repeat","background-color":"#15A2DA","text-indent":"-1000px"}},{label:"Basecamp",pattern:/basecamp\.com/,type:"base",styles:{background:"url(../../img/icon-basecamp.png) center no-repeat","background-color":"#77CA8C","text-indent":"-1000px"}},{label:"Delicious",pattern:/delicious\.com/,type:"deli",styles:{background:"url(../../img/icon-delicious.png) center no-repeat","background-color":"#285da7","text-indent":"-1000px"}},{label:"Google Plus",pattern:/plus\.google\.com/,type:"g+",styles:{background:"url(../../img/icon-google.png) center no-repeat","background-color":"#DE4436","text-indent":"-1000px"}},{label:"Pinterest",pattern:/pinterest\.com/,type:"pint",styles:{background:"url(../../img/icon-pinterest.png) center no-repeat","background-color":"#C93339","text-indent":"-1000px"}},{label:"Kontiki",pattern:/videocenter\.kontiki\.com/,type:"ktik",styles:{background:"url(../../img/icon-kontiki.png) center no-repeat","background-color":"#25a7d4","text-indent":"-1000px"}},{label:"Facebook",pattern:/facebook\.com/,type:"fb",styles:{background:"url(../../img/icon-facebook.png) center no-repeat","background-color":"#43609c","text-indent":"-1000px"}},{label:"Flinto",pattern:/flinto\.com/,type:"flto",styles:{background:"url(../../img/icon-flinto.png) center no-repeat","background-color":"#333940","text-indent":"-1000px"}}],releases=[{label:"170 (Spring '11)",dateRange:moment().range(moment("7/30/2010"),moment("12/3/2010"))},{label:"172 (Summer '11)",dateRange:moment().range(moment("12/6/2010"),moment("3/31/2011"))},{label:"174 (Winter '12)",dateRange:moment().range(moment("3/31/2011"),moment("7/22/2011"))},{label:"176 (Spring '12)",dateRange:moment().range(moment("7/22/2011"),moment("11/18/2011"))},{label:"178 (Summer '12)",dateRange:moment().range(moment("11/18/2011"),moment("3/29/2012"))},{label:"180 (Winter '13)",dateRange:moment().range(moment("3/30/2012"),moment("7/26/2012"))},{label:"182 (Spring '13)",dateRange:moment().range(moment("7/27/2012"),moment("11/15/2012"))},{label:"184 (Summer '13)",dateRange:moment().range(moment("11/16/2012"),moment("3/28/2013"))},{label:"186 (Winter '14)",dateRange:moment().range(moment("3/29/2013"),moment("7/25/2013"))},{label:"188 (Spring '14)",dateRange:moment().range(moment("7/26/2013"),moment("11/14/2013"))},{label:"190 (Summer '14)",dateRange:moment().range(moment("11/22/2013"),moment("3/27/2014"))},{label:"192 (Winter '15)",dateRange:moment().range(moment("3/28/2014"),moment("7/31/2014"))},{label:"194 (Spring '15)",dateRange:moment().range(moment("8/1/2014"),moment("11/20/2014"))},{label:"196 (Summer '15)",dateRange:moment().range(moment("11/21/2014"),moment("3/26/2015"))},{label:"198 (Winter '16)",dateRange:moment().range(moment("3/27/2015"),moment("7/30/2015"))},{label:"200 (Spring '16)",dateRange:moment().range(moment("7/31/2015"),moment("11/19/2015"))},{label:"202 (Summer '16)",dateRange:moment().range(moment("11/20/2015"),moment("3/31/2016"))},{label:"204 (Winter '17)",dateRange:moment().range(moment("4/1/2016"),moment("7/28/2016"))},{label:"206 (Spring '17)",dateRange:moment().range(moment("7/29/2016"),moment("11/17/2016"))},{label:"208 (Summer '17)",dateRange:moment().range(moment("11/18/2016"),moment("3/30/2017"))},{label:"210 (Winter '18)",dateRange:moment().range(moment("3/31/2017"),moment("7/27/2017"))}],styleString="",styleTag=document.createElement("style");
return styleTag.type="text/css",angular.forEach(types,function(type){angular.forEach(type.extensions,function(extension){styleString+='[data-content-type="'+extension+'"],'}),styleString=styleString.replace(/,$/g," {"),angular.forEach(type.styles,function(value,property){value=value.replace(/\.\.\/\.\./,window.Slic.Salesforce.assetsURL),styleString+=""+property+":"+value+";"}),styleString+="}"}),angular.forEach(sites,function(site){styleString+='[data-content-type="'+site.type+'"] {',angular.forEach(site.styles,function(value,property){value=value.replace(/\.\.\/\.\./,window.Slic.Salesforce.assetsURL),styleString+=""+property+":"+value+";"}),styleString+="}"}),styleTag.innerHTML=styleString,document.head.appendChild(styleTag),{types:types,sites:sites,releases:releases}}]).factory("AutoTag",["$filter","FileType",function($filter,FileType){return function(params){return function(){var findTag,addTag,checkFileForTag,checkDateForTag;findTag=function(label){return $filter("filter")(params.tagsMerged,{Title__c:label})[0]},addTag=function(newTag){var i,tag;for(i=0;i<params.tags.length;i++)if(tag=params.tags[i],tag.Id===newTag.Id)return;params.tags.push(newTag)},checkFileForTag=function(fileUpload){var i,site,type,extension;if("url"===fileUpload.type)for(i=0;i<FileType.sites.length;i++)if(site=FileType.sites[i],site.pattern&&fileUpload.url.match(site.pattern)){addTag(findTag(site.label));break}if("upload"===fileUpload.type)for(extension=fileUpload.name.split("."),extension=extension[extension.length-1],i=0;i<FileType.types.length;i++)if(type=FileType.types[i],-1!==type.extensions.indexOf(extension)){addTag(findTag(type.label));break}},checkDateForTag=function(moment){angular.forEach(FileType.releases,function(release){release.dateRange.contains(moment)&&addTag(findTag(release.label))})},params.callback.call(this,findTag,addTag,checkFileForTag,checkDateForTag)}}}]),angular.module("Filters").filter("backgroundImage",function(){return function(url,type){return type=void 0===type?"object":type,"string"===type?"background-image: url("+url+");":{"background-image":"url("+url+")"}}}).filter("date",function(){return function(input){return input?moment(input).format("MMM DD, YYYY"):input}}).filter("getById",function(){return function(input,id){for(var i=0,len=input.length;len>i;i++)if(input[i].id===id)return input[i];return null}}).filter("markdown",function(){return function(input){return input?markdown.toHTML(input):""}}).filter("newlines",function(){return function(input){return null!==input?input.replace(/\n/g,"<br/>"):""}}).filter("rendition",function(){var sizes={small:"THUMB120BY90",medium:"THUMB240BY180",large:"THUMB720BY480"};return function(id,size){return size=void 0===size?"medium":size,null!==id?{"background-image":"url(/sfc/servlet.shepherd/version/renditionDownload?rendition="+sizes[size]+"&versionId="+id+")"}:{}}}).filter("styleString",["Utilities",function(Utilities){return function(styleObject){return Utilities.styleString(styleObject)}}]).filter("url",function(){return function(url){return url?url.match(/^http(s)?:\/\//)?url:"http://"+url:url}}),angular.module("Services").service("Helper",["$q","$rootScope","$location","CompanyFactory","StaffFactory","CredentialsFactory","InsuranceFactory",function($q,$rootScope,$location,CompanyFactory,StaffFactory,CredentialsFactory,InsuranceFactory){this.setCompanyInfo=function(appId,secureCode){var companyInfo,deferred=$q.defer();return companyInfo=CompanyFactory.getCompanyInfo(appId,secureCode),companyInfo.then(function(response){$rootScope.global.company=response,deferred.resolve()}),deferred.promise},this.setStaffInfo=function(appId,secureCode){var staffInfo,deferred=$q.defer();return staffInfo=StaffFactory.getStaffInfo(appId,secureCode),staffInfo.then(function(response){$rootScope.global.staffs=response,deferred.resolve()}),deferred.promise},this.setCredentialsInfo=function(appId,secureCode){var credentialsInfo,deferred=$q.defer();return credentialsInfo=CredentialsFactory.getCredentialsInfo(appId,secureCode),credentialsInfo.then(function(response){$rootScope.global.credentials=response,deferred.resolve()}),deferred.promise},this.setInsuranceInfo=function(appId,secureCode){var insuranceInfo,deferred=$q.defer();return insuranceInfo=InsuranceFactory.getInsuranceInfo(appId,secureCode),insuranceInfo.then(function(response){$rootScope.global.insurance=response,deferred.resolve()}),deferred.promise},this.goToLocation=function(page,appId,secureCode){$location.path("/"+page+"/"+appId+"/"+secureCode)},this.getLocation=function(){return $location.path().split("/")[1]},this.resetPropertiesOf=function(objectToReset){for(var property in objectToReset)objectToReset.hasOwnProperty(property)&&("null"==typeof property&&(objectToReset[property]={}),"boolean"==typeof property&&(objectToReset[property]=!1),"number"==typeof property&&(objectToReset[property]=0),"string"==typeof property&&(objectToReset[property]=""))},this.clone=function(obj){if(null==obj||"object"!=typeof obj)return obj;var copy=obj.constructor();for(var attr in obj)obj.hasOwnProperty(attr)&&(copy[attr]=obj[attr]);return copy}}]);