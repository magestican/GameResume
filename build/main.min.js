/*! slic 2014-11-21 */
!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require){require("./controllers.js"),require("./directives.js"),require("./factories.js"),require("./filters.js")},{"./controllers.js":2,"./directives.js":4,"./factories.js":5,"./filters.js":6}],2:[function(require){angular.module("SlicControllers",[]),require("./controllers/main.js")},{"./controllers/main.js":3}],3:[function(){angular.module("SlicControllers").controller("MainController",["$scope","$filter",function(){function Vector(x,y){this.x=x||0,this.y=y||0}function Particle(point,velocity,acceleration){this.position=point||new Vector(0,0),this.velocity=velocity||new Vector(0,0),this.acceleration=acceleration||new Vector(0,0)}function Emitter(point,velocity,spread){this.position=point,this.velocity=velocity,this.spread=spread||Math.PI/32,this.drawColor="#999"}function Field(point,mass){this.position=point,this.setMass(mass)}var Game={};Game.fps=60,Game.maxFrameSkip=10,Game.skipTicks=1e3/Game.fps;var c=document.getElementById("myCanvas"),ctx=c.getContext("2d");Vector.prototype.add=function(vector){this.x+=vector.x,this.y+=vector.y},Vector.prototype.getMagnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},Vector.prototype.getAngle=function(){return Math.atan2(this.y,this.x)},Vector.fromAngle=function(angle,magnitude){return new Vector(magnitude*Math.cos(angle),magnitude*Math.sin(angle))},Particle.prototype.move=function(){this.velocity.add(this.acceleration),this.position.add(this.velocity)},Emitter.prototype.emitParticle=function(){var angle=this.velocity.getAngle()+this.spread-Math.random()*this.spread*2,magnitude=this.velocity.getMagnitude(),position=new Vector(this.position.x,this.position.y),velocity=Vector.fromAngle(angle,magnitude);return new Particle(position,velocity)},Field.prototype.setMass=function(mass){this.mass=mass||100,this.drawColor=0>mass?"#f00":"#0f0"},Particle.prototype.submitToFields=function(fields){for(var totalAccelerationX=0,totalAccelerationY=0,i=0;i<fields.length;i++){var field=fields[i],vectorX=field.position.x-this.position.x,vectorY=field.position.y-this.position.y,force=field.mass/Math.pow(vectorX*vectorX+vectorY*vectorY,1.5);totalAccelerationX+=vectorX*force,totalAccelerationY+=vectorY*force}this.acceleration=new Vector(totalAccelerationX,totalAccelerationY)},Particle.prototype.submitToFields=function(fields){for(var totalAccelerationX=0,totalAccelerationY=0,i=0;i<fields.length;i++){var field=fields[i],vectorX=field.position.x-this.position.x,vectorY=field.position.y-this.position.y,force=field.mass/Math.pow(vectorX*vectorX+vectorY*vectorY,1.5);totalAccelerationX+=vectorX*force,totalAccelerationY+=vectorY*force}this.acceleration=new Vector(totalAccelerationX,totalAccelerationY)};{var midX=c.width/2,midY=c.height/2;[new Emitter(new Vector(midX-150,midY),Vector.fromAngle(6,2))],[new Field(new Vector(midX-100,midY+20),150),new Field(new Vector(midX-300,midY+20),100),new Field(new Vector(midX-200,midY-40),-20),new Field(new Vector(midX,midY+20),-20)]}Game.initialize=function(){this.entities=[],this.viewport=document.body,this.input=new Input,this.debug=new Debug,this.debug.initialize(this.viewport),this.screen=new Screen,this.screen.initialize(this.viewport),this.screen.setWorld(new World)},Game.update=function(tick){Game.tick=tick,this.input.update(),this.debug.update(),this.screen.update()},Game.draw=function(){this.debug.draw(),this.screen.clear(),this.screen.draw()},Game.pause=function(){this.paused=this.paused?!1:!0},Game.clear=function(){ctx.clearRect(0,0,c.width,c.height)},Game.run=function(){var loops=0,nextGameTick=(new Date).getTime(),startTime=(new Date).getTime();return function(){for(loops=0;!Game.paused&&(new Date).getTime()>nextGameTick&&loops<Game.maxFrameSkip;)Game.update(nextGameTick-startTime),nextGameTick+=Game.skipTicks,loops++;Game.draw()}}(),function(){var onEachFrame;onEachFrame=window.webkitRequestAnimationFrame?function(cb){var _cb=function(){cb(),webkitRequestAnimationFrame(_cb)};_cb()}:window.mozRequestAnimationFrame?function(cb){var _cb=function(){cb(),mozRequestAnimationFrame(_cb)};_cb()}:function(cb){setInterval(cb,Game.skipTicks)},window.onEachFrame=onEachFrame}()}])},{}],4:[function(){angular.module("SlicDirectives",[])},{}],5:[function(){angular.module("SlicFactories",[])},{}],6:[function(){angular.module("SlicFilters",[])},{}]},{},[1]);